#!/bin/bash
source "$HOME/.local/bin/git-suite-lib.sh"
CFG="$HOME/.config/git-suite/favorites"

if [[ "$1" == "-a" ]]; then
    [ -z "$2" ] && echo "Usage: gh -a <alias> <desc> [cmd]" && exit 1
    echo "$2|$3|$4" >> "$CFG"; echo "${C_SUCCESS}Saved.${RESET}"; exit 0
fi

ui_header "GIT DASHBOARD" "Suite v2"
print_row() { printf "  ${C_ACCENT}%-10s${RESET}  %-20s  ${C_MUTED}%s${RESET}\n" "$1" "$2" "$3"; }
print_section() { printf "\n${C_MAIN}${BOLD}%s${RESET}\n" "$1"; }

print_section "âš¡ WORKFLOW"
print_row "gps" "Repo Manager"      "Projekte suchen & wechseln"
print_row "gsw" "Branch Manager"    "Switch / New / Delete / Rename"
print_row "gcw" "Smart Commit"      "Wizard (Add, Commit, Push)"

print_section "ðŸš€ ACTIONS (via gcw)"
print_row "gup" "Push & PR"         "Direkt Push (gcw -p)"
print_row "gundo" "Revert"          "Undo Commit (gcw -r)"

print_section "ðŸ›   TOOLS"
print_row "gst" "Stash Manager"     "Stashes verwalten"
print_row "gset" "Settings"         "Einstellungen & Aliase"
print_row "gs" "Status" "Git Status"
print_row "gl" "Pull" "Git Pull Rebase"

if [ -f "$CFG" ] && [ -s "$CFG" ]; then
    print_section "ðŸŒŸ FAVORITES"
    while IFS='|' read -r c d f; do
        [[ -z "$c" || "$c" =~ ^# ]] && continue
        printf "  ${C_YELLOW}%-10s${RESET}  %-20s  ${C_MUTED}%s${RESET}\n" "$c" "$d" "${f:-Custom}"
    done < "$CFG"
fi
printf "\n"
